<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Cache-Control" content="no-store" />
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Veritas Guard</title>

<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõ°Ô∏è</text></svg>">

<style>
body{margin:0;font-family:system-ui;background:#0b1220;color:#e5e7eb}
#legal-marquee{background:#7c2d12;color:#fff;padding:8px 0;font-size:14px}
#app{max-width:480px;margin:40px auto;background:#0f172a;border-radius:12px;padding:20px;box-shadow:0 0 40px rgba(0,0,0,.5)}
h1{text-align:center;margin:0 0 6px}
.tagline{text-align:center;font-size:13px;color:#9ca3af}
textarea{width:100%;height:100px;margin-top:16px;border-radius:8px;border:1px solid #334155;padding:12px;background:#020617;color:#e5e7eb;box-sizing:border-box;resize:none}
textarea:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 15px rgba(59,130,246,.4)}
.btn-primary{width:100%;margin-top:12px;padding:14px;border:none;cursor:pointer;border-radius:8px;background:#2563eb;color:white;font-size:16px;font-weight:bold}
.btn-primary:hover{background:#1d4ed8}
#resultSection{display:none;margin-top:20px;background:#1e293b;padding:15px;border-radius:8px;border:1px solid #334155}
.risk-badge{display:inline-block;padding:6px 12px;border-radius:4px;font-weight:bold;font-size:14px;margin-bottom:10px}
.explanation{font-size:14px;margin-bottom:12px}
.signals-list{padding-left:20px;font-size:13px;color:#9ca3af}
.hash-display{margin-top:12px;font-family:monospace;font-size:10px;color:#64748b;word-break:break-all;background:#020617;padding:8px;border-radius:4px;border:1px dashed #334155}
.action-row{display:flex;gap:10px;margin-top:15px}
.action-btn{flex:1;padding:10px;border:none;border-radius:6px;font-size:13px;font-weight:bold;cursor:pointer}
.btn-voice{background:#f59e0b;color:#000}
.btn-share{background:#10b981;color:#000}
.btn-clear{background:#ef4444;color:#000}
.lang-btn{padding:6px 12px;margin-left:4px;border-radius:6px;border:none;background:#3b82f6;color:#fff;cursor:pointer}
</style>
</head>

<body>

<div style="position:fixed;top:12px;right:12px;z-index:9999">
  <button class="lang-btn" onclick="applyLang('en')">EN</button>
  <button class="lang-btn" onclick="applyLang('hi')">‡§π‡§ø‡§Ç‡§¶‡•Ä</button>
</div>

<marquee id="legal-marquee"></marquee>

<div id="app">
  <h1>üõ°Ô∏è Veritas Guard</h1>
  <div class="tagline" id="tagline"></div>

  <textarea id="input-text"></textarea>
  <button class="btn-primary" id="main-btn" onclick="analyzeText()">
    <span id="analyze-btn"></span>
  </button>

  <div id="resultSection">
    <div id="riskBadge" class="risk-badge"></div>
    <div id="explainText" class="explanation"></div>

    <div style="font-size:12px;font-weight:bold;margin-bottom:4px" id="signal-title"></div>
    <ul id="signalsList" class="signals-list"></ul>

    <div id="hashDisplay" class="hash-display"></div>

    <div class="action-row">
      <button class="action-btn btn-voice" onclick="playVoice()">üîä <span id="btn-voice-txt"></span></button>
      <button class="action-btn btn-share" onclick="shareResult()">üì≤ <span id="btn-share-txt"></span></button>
      <button class="action-btn btn-clear" onclick="location.reload()">üóëÔ∏è <span id="btn-clear-txt"></span></button>
    </div>
  </div>

  <div style="font-size:12px;color:#9ca3af;margin-top:10px;text-align:center">
    üîí No Login ¬∑ No Cookies ¬∑ No Data Stored
  </div>
</div>

<footer style="text-align:center;font-size:12px;color:#64748b;margin-top:20px">
¬© Veritas Engine ‚Äî Open Risk Awareness Tool
</footer>

<script>
/* üîó GOOGLE CLOUD VERITAS ENGINE */
const API_URL = "http://34.135.63.210:3000/api/scan";

const I18N={
en:{
tagline:"Explain risk. Don‚Äôt demand trust.",
placeholder:"Paste SMS, WhatsApp message, or link here...",
button:"Analyze Risk Signals",
marquee:"‚ö†Ô∏è This tool highlights known risk patterns only. Final responsibility is yours.",
share:"Share",clear:"Clear",listen:"Listen",
signals:"Triggered Signals",
voiceHigh:"Warning! This message shows scam indicators. Do not click links.",
voiceSafe:"Message seems safe, stay alert."
},
hi:{
tagline:"‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§∏‡§Æ‡§ù‡§æ‡§á‡§è‡•§ ‡§≠‡§∞‡•ã‡§∏‡§æ ‡§Æ‡§§ ‡§Æ‡§æ‡§Ç‡§ó‡§ø‡§è‡•§",
placeholder:"SMS, WhatsApp ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§Ø‡§æ ‡§≤‡§ø‡§Ç‡§ï ‡§Ø‡§π‡§æ‡§Å ‡§°‡§æ‡§≤‡•á‡§Ç‚Ä¶",
button:"‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§∏‡§Ç‡§ï‡•á‡§§‡•ã‡§Ç ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§∞‡•á‡§Ç",
marquee:"‚ö†Ô∏è ‡§Ø‡§π ‡§ü‡•Ç‡§≤ ‡§ï‡•á‡§µ‡§≤ ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§™‡•à‡§ü‡§∞‡•ç‡§® ‡§¶‡§ø‡§ñ‡§æ‡§§‡§æ ‡§π‡•à‡•§ ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø ‡§Ü‡§™‡§ï‡§æ ‡§π‡•à‡•§",
share:"‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç",clear:"‡§∏‡§æ‡§´‡§º ‡§ï‡§∞‡•á‡§Ç",listen:"‡§∏‡•Å‡§®‡•á",
signals:"‡§ñ‡§§‡§∞‡•á ‡§ï‡•á ‡§∏‡§Ç‡§ï‡•á‡§§",
voiceHigh:"‡§∏‡§æ‡§µ‡§ß‡§æ‡§®! ‡§Ø‡§π ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§´‡§∞‡•ç‡§ú‡•Ä ‡§π‡•ã ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§",
voiceSafe:"‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§™‡•ç‡§∞‡§§‡•Ä‡§§ ‡§π‡•ã‡§§‡§æ ‡§π‡•à, ‡§∏‡§§‡§∞‡•ç‡§ï ‡§∞‡§π‡•á‡§Ç‡•§"
}
};

let lang="en",risk=0;

function applyLang(l){
lang=l;
tagline.innerText=I18N[l].tagline;
input-text.placeholder=I18N[l].placeholder;
analyze-btn.innerText=I18N[l].button;
legal-marquee.innerText=I18N[l].marquee;
btn-share-txt.innerText=I18N[l].share;
btn-clear-txt.innerText=I18N[l].clear;
btn-voice-txt.innerText=I18N[l].listen;
signal-title.innerText=I18N[l].signals;
}
window.onload=()=>applyLang("en");

async function analyzeText(){
const raw=input-text.value.trim();
if(!raw)return;

const masked=raw.replace(/\b\d{8,14}\b/g,m=>"X".repeat(m.length-4)+m.slice(-4));

main-btn.disabled=true;
resultSection.style.display="none";

try{
const r=await fetch(API_URL,{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({text:masked})
});
const d=await r.json();
risk=d.verdict;

const colors=["#10b981","#eab308","#f97316","#ef4444"];
const labels=["SAFE","ATTENTION","RISK","HIGH RISK"];

riskBadge.innerText=labels[risk];
riskBadge.style.color=colors[risk];
riskBadge.style.border="1px solid "+colors[risk];

explainText.innerText=d.explain_text;
signalsList.innerHTML=d.fired_rules.map(x=>`<li>${x.replace(/_/g," ")}</li>`).join("");
hashDisplay.innerText="Audit Hash: "+d.audit_hash;

resultSection.style.display="block";
if(risk>=2) playVoice();

}catch(e){
alert("Veritas Engine unreachable");
}finally{
main-btn.disabled=false;
}
}

function playVoice(){
speechSynthesis.cancel();
const msg=risk>=2?I18N[lang].voiceHigh:I18N[lang].voiceSafe;
const u=new SpeechSynthesisUtterance(msg);
u.lang=lang==="hi"?"hi-IN":"en-US";
speechSynthesis.speak(u);
}

function shareResult(){
const t=`Veritas Scan Result: ${riskBadge.innerText}\n${hashDisplay.innerText}`;
if(navigator.share)navigator.share({title:"Veritas Guard",text:t});
}
</script>

</body>
</html>