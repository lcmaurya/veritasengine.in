<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Veritas Guard ‚Äî Risk Awareness Tool</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600;700&family=Outfit:wght@300;400;600;700;900&display=swap" rel="stylesheet">
<style>
:root {
  --bg:#0a0010;--surface:#110022;--surface2:#1a0035;
  --border:#3d1a6e;--border2:#5a2a9e;
  --purple:#9b59f5;--purple2:#7c3aed;--purple3:#c084fc;
  --white:#f5f0ff;--muted:#8b7aa8;
  --v0:#22c55e;--v1:#eab308;--v2:#f97316;--v3:#ef4444;
  --glow:0 0 20px rgba(155,89,245,0.3);
}
*{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:var(--white);font-family:'Outfit',sans-serif;min-height:100vh;overflow-x:hidden}
body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(155,89,245,.04) 1px,transparent 1px),linear-gradient(90deg,rgba(155,89,245,.04) 1px,transparent 1px);background-size:32px 32px;pointer-events:none;z-index:0}
body::after{content:'';position:fixed;width:500px;height:500px;background:radial-gradient(circle,rgba(124,58,237,.15) 0%,transparent 70%);top:-100px;right:-100px;pointer-events:none;z-index:0}
#app{position:relative;z-index:1;max-width:520px;margin:0 auto;padding:16px 14px 60px}

/* MARQUEE */
#warn-bar{position:fixed;top:0;left:0;right:0;z-index:100;background:rgba(124,58,237,.2);border-bottom:1px solid var(--border2);padding:6px 0;overflow:hidden;backdrop-filter:blur(12px)}
#warn-text{display:inline-block;white-space:nowrap;font-family:'IBM Plex Mono',monospace;font-size:11px;color:var(--purple3);animation:marquee 25s linear infinite;padding-left:100%}
@keyframes marquee{from{transform:translateX(0)}to{transform:translateX(-200%)}}

/* HEADER */
.header{text-align:center;padding:52px 0 20px}
.logo-wrap{display:inline-flex;align-items:center;gap:12px;margin-bottom:6px}
.logo-icon{width:44px;height:44px;background:linear-gradient(135deg,var(--purple2),#4c1d95);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:22px;box-shadow:var(--glow),inset 0 1px 0 rgba(255,255,255,.1)}
.logo-name{font-size:28px;font-weight:900;letter-spacing:-0.5px;background:linear-gradient(135deg,var(--purple3),var(--white));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.tagline{font-family:'IBM Plex Mono',monospace;font-size:11px;color:var(--muted);letter-spacing:1.5px;text-transform:uppercase;margin-top:2px}
.engine-badge{display:inline-flex;align-items:center;gap:6px;margin-top:10px;padding:4px 12px;background:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.3);border-radius:20px;font-family:'IBM Plex Mono',monospace;font-size:10px;color:#22c55e;cursor:pointer}
.engine-badge .dot{width:6px;height:6px;background:#22c55e;border-radius:50%;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}

/* STATS */
.stats-bar{display:flex;gap:8px;margin:14px 0}
.stat-box{flex:1;background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:10px 8px;text-align:center}
.stat-val{font-family:'IBM Plex Mono',monospace;font-size:18px;font-weight:700;color:var(--purple3)}
.stat-lbl{font-size:9px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-top:2px}

/* RATE BAR */
.rate-bar{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:10px 14px;margin-bottom:10px;display:flex;align-items:center;justify-content:space-between}
.rate-left{font-family:'IBM Plex Mono',monospace;font-size:11px;color:var(--muted)}
.rate-left span{color:var(--purple3);font-weight:600}
.rate-dots{display:flex;gap:4px}
.rate-dot{width:8px;height:8px;border-radius:50%;background:var(--purple2);transition:all .3s}
.rate-dot.used{background:var(--border);opacity:.4}

/* CARD */
.card{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:18px;margin-bottom:10px}
.lang-row{display:flex;gap:6px;margin-bottom:14px}
.lang-btn{flex:1;padding:8px;background:transparent;border:1px solid var(--border);border-radius:8px;color:var(--muted);font-family:'IBM Plex Mono',monospace;font-size:12px;cursor:pointer;transition:all .2s}
.lang-btn.active{background:rgba(155,89,245,.15);border-color:var(--purple);color:var(--purple3)}
.field-label{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:6px}
select{width:100%;padding:10px 12px;background:var(--bg);border:1px solid var(--border);border-radius:8px;color:var(--white);font-family:'Outfit',sans-serif;font-size:14px;margin-bottom:14px;outline:none;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%239b59f5' d='M6 8L1 3h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center}
select:focus{border-color:var(--purple)}
select option{background:#1a0035;color:var(--white)}
textarea{width:100%;height:110px;padding:12px;background:var(--bg);border:1px solid var(--border);border-radius:8px;color:var(--white);font-family:'IBM Plex Mono',monospace;font-size:12px;resize:none;outline:none;line-height:1.6;transition:border-color .2s}
textarea:focus{border-color:var(--purple);box-shadow:0 0 0 2px rgba(155,89,245,.1)}
textarea::placeholder{color:var(--muted)}
.char-row{display:flex;justify-content:space-between;align-items:center;margin-top:6px;margin-bottom:14px}
.clear-btn{background:transparent;border:1px solid var(--border);color:var(--muted);padding:4px 10px;border-radius:6px;font-size:11px;font-family:'IBM Plex Mono',monospace;cursor:pointer;transition:all .2s}
.clear-btn:hover{border-color:var(--purple);color:var(--purple3)}
.char-count{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--muted)}

/* ANALYZE BTN */
#analyze-btn{width:100%;padding:15px;background:linear-gradient(135deg,var(--purple2),#4c1d95);border:none;border-radius:10px;color:#fff;font-family:'Outfit',sans-serif;font-weight:700;font-size:15px;letter-spacing:0.5px;cursor:pointer;transition:all .2s;box-shadow:0 4px 20px rgba(124,58,237,.4);position:relative;overflow:hidden}
#analyze-btn:hover{transform:translateY(-1px);box-shadow:0 8px 28px rgba(124,58,237,.5)}
#analyze-btn:disabled{opacity:.5;cursor:not-allowed;transform:none}
#analyze-btn.loading::after{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.1),transparent);animation:shimmer 1s infinite}
@keyframes shimmer{to{left:100%}}
.trust-row{display:flex;justify-content:center;gap:14px;margin-top:10px;flex-wrap:wrap}
.trust-item{font-family:'IBM Plex Mono',monospace;font-size:9px;color:var(--muted)}
.trust-item::before{content:'‚úì ';color:var(--purple)}

/* EXAMPLES */
.examples-section{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:14px;margin-bottom:10px}
.examples-title{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:10px}
.example-btns{display:flex;flex-direction:column;gap:6px}
.ex-btn{width:100%;padding:9px 12px;background:transparent;border:1px solid var(--border);border-radius:8px;color:var(--muted);font-family:'IBM Plex Mono',monospace;font-size:11px;cursor:pointer;text-align:left;transition:all .2s}
.ex-btn:hover{border-color:var(--purple);color:var(--purple3);background:rgba(155,89,245,.05)}

/* RESULT */
#result-card{display:none;background:var(--surface);border-radius:14px;overflow:hidden;margin-bottom:10px;animation:slideIn .3s ease;border:1px solid var(--border)}
@keyframes slideIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
.result-header{padding:18px;display:flex;align-items:center;gap:14px}
.verdict-icon{width:52px;height:52px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:26px;flex-shrink:0;font-weight:900}
.verdict-label{font-size:20px;font-weight:900;letter-spacing:-0.3px}
.verdict-desc{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--muted);margin-top:3px}
.summary-line{padding:0 18px 14px;font-size:13px;color:var(--white);opacity:.8;border-bottom:1px solid var(--border)}
.conf-wrap{padding:14px 18px}
.conf-top{display:flex;justify-content:space-between;font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--muted);margin-bottom:6px}
.conf-note{font-size:9px;color:var(--muted);margin-top:4px}
.conf-bar{height:6px;background:var(--border);border-radius:3px;overflow:hidden}
.conf-fill{height:100%;border-radius:3px;width:0%;transition:width .8s cubic-bezier(.4,0,.2,1)}
.rules-wrap{padding:0 18px 14px}
.collapsible-btn{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--purple);cursor:pointer;background:none;border:none;padding:0;display:flex;align-items:center;gap:4px;margin-bottom:8px}
.collapsible-btn::before{content:'‚ñ∂ ';font-size:8px;display:inline-block;transition:transform .2s}
.collapsible-btn.open::before{transform:rotate(90deg)}
.collapsible-body{display:none;flex-wrap:wrap;gap:6px}
.collapsible-body.open{display:flex}
.trace-body-inner{display:none}
.trace-body-inner.open{display:block}
.rule-tag{padding:4px 10px;border-radius:20px;font-family:'IBM Plex Mono',monospace;font-size:10px;border:1px solid;display:inline-block;margin:2px}
.trace-wrap{padding:0 18px 14px}
.trace-row{display:flex;justify-content:space-between;font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--muted);padding:4px 0;border-bottom:1px solid rgba(255,255,255,.04)}
.trace-row span:last-child{color:var(--purple3)}
.hash-wrap{padding:12px 18px;background:rgba(0,0,0,.3);border-top:1px solid var(--border);display:flex;justify-content:space-between;align-items:flex-start;font-family:'IBM Plex Mono',monospace;font-size:9px}
.hash-key{color:var(--muted);flex-shrink:0;margin-right:8px}
.hash-val{color:var(--purple);word-break:break-all;text-align:right}
.safe-notice{padding:12px 18px;background:rgba(155,89,245,.06);border-top:1px solid var(--border);font-size:11px;color:var(--muted)}
.feedback-wrap{padding:12px 18px;border-top:1px solid var(--border);display:flex;align-items:center;gap:10px}
.feedback-lbl{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--muted);flex-shrink:0}
.fb-btn{padding:5px 12px;background:transparent;border:1px solid var(--border);border-radius:20px;font-size:11px;color:var(--muted);cursor:pointer;font-family:'IBM Plex Mono',monospace;transition:all .2s}
.fb-btn:hover{border-color:var(--purple);color:var(--purple3)}
.fb-btn.selected{background:rgba(155,89,245,.15);border-color:var(--purple);color:var(--purple3)}

/* DISCLAIMER */
.disclaimer-always{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:14px 16px;margin-bottom:10px;font-size:11px;color:var(--muted);line-height:1.7}
.disclaimer-always strong{color:var(--purple3);display:block;margin-bottom:4px;font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:1px;font-style:normal}

/* TRANSPARENCY */
.transparency{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:14px 16px;margin-bottom:10px}
.transparency-title{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:10px}
.trans-list{display:flex;flex-direction:column;gap:6px}
.trans-item{font-size:12px;color:var(--white);display:flex;align-items:center;gap:8px}
.trans-item::before{content:'‚óÜ';color:var(--purple);font-size:8px;flex-shrink:0}

footer{text-align:center;font-family:'IBM Plex Mono',monospace;font-size:9px;color:var(--muted);padding:20px 0 10px;line-height:1.8}
footer span{color:var(--purple)}

/* MODALS */
.modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.8);z-index:200;align-items:center;justify-content:center;padding:20px;backdrop-filter:blur(4px)}
.modal-overlay.show{display:flex}
.modal-box{background:var(--surface2);border:1px solid var(--border2);border-radius:16px;padding:28px;max-width:360px;width:100%;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,.5),var(--glow)}
.modal-icon{font-size:40px;margin-bottom:12px}
.modal-title{font-size:18px;font-weight:700;color:var(--purple3);margin-bottom:8px}
.modal-text{font-family:'IBM Plex Mono',monospace;font-size:11px;color:var(--muted);line-height:1.7;margin-bottom:16px}
.modal-close{padding:10px 24px;background:var(--purple2);border:none;border-radius:8px;color:#fff;font-family:'Outfit',sans-serif;font-weight:600;font-size:13px;cursor:pointer}

/* VERDICT COLORS */
.v0{color:var(--v0)}.v1{color:var(--v1)}.v2{color:var(--v2)}.v3{color:var(--v3)}
.bg0{background:rgba(34,197,94,.12)}.bg1{background:rgba(234,179,8,.12)}.bg2{background:rgba(249,115,22,.12)}.bg3{background:rgba(239,68,68,.12)}
.fill0{background:var(--v0)}.fill1{background:var(--v1)}.fill2{background:var(--v2)}.fill3{background:var(--v3)}
.rt0{color:var(--v0);border-color:rgba(34,197,94,.3);background:rgba(34,197,94,.08)}
.rt1{color:var(--v1);border-color:rgba(234,179,8,.3);background:rgba(234,179,8,.08)}
.rt2{color:var(--v2);border-color:rgba(249,115,22,.3);background:rgba(249,115,22,.08)}
.rt3{color:var(--v3);border-color:rgba(239,68,68,.3);background:rgba(239,68,68,.08)}
</style>
</head>
<body>

<div id="warn-bar">
  <span id="warn-text">‚ö† This tool analyzes text for known risk patterns. It does NOT confirm fraud. Final responsibility remains with the user. False positives are possible. ‚ö† ‡§Ø‡§π ‡§ü‡•Ç‡§≤ ‡§ï‡•á‡§µ‡§≤ ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§™‡•à‡§ü‡§∞‡•ç‡§® ‡§¶‡§ø‡§ñ‡§æ‡§§‡§æ ‡§π‡•à ‚Äî ‡§ß‡•ã‡§ñ‡§æ‡§ß‡§°‡§º‡•Ä ‡§ï‡•Ä ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡§§‡§æ‡•§</span>
</div>

<div id="app">

  <div class="header">
    <div class="logo-wrap">
      <div class="logo-icon">üõ°Ô∏è</div>
      <div class="logo-name">Veritas Guard</div>
    </div>
    <div class="tagline" id="tagline-text">EXPLAIN RISK ¬∑ DON'T DEMAND TRUST</div>
    <div class="engine-badge" onclick="document.getElementById('info-popup').classList.add('show')">
      <div class="dot"></div>
      <span>ENGINE v1.1 ‚Äî ONLINE</span>
    </div>
  </div>

  <div class="stats-bar">
    <div class="stat-box">
      <div class="stat-val" id="stat-total">‚Äî</div>
      <div class="stat-lbl" id="lbl-total">Total Scans</div>
    </div>
    <div class="stat-box">
      <div class="stat-val" id="stat-today">‚Äî</div>
      <div class="stat-lbl" id="lbl-today">Today</div>
    </div>
    <div class="stat-box">
      <div class="stat-val" id="stat-pct">‚Äî</div>
      <div class="stat-lbl">Flagged %</div>
    </div>
  </div>

  <div class="rate-bar">
    <div class="rate-left" id="rate-text">Remaining today: <span id="rate-num">10</span>/10</div>
    <div class="rate-dots" id="rate-dots"></div>
  </div>

  <div class="card">
    <div class="lang-row">
      <button class="lang-btn active" id="btn-en" onclick="setLang('en')">EN</button>
      <button class="lang-btn" id="btn-hi" onclick="setLang('hi')">‡§π‡§ø‡§Ç‡§¶‡•Ä</button>
    </div>

    <div class="field-label" id="lbl-usecase">USE CASE</div>
    <select id="usecase">
      <option value="cyber" data-en="Cyber / Fraud" data-hi="‡§∏‡§æ‡§á‡§¨‡§∞ / ‡§´‡•ç‡§∞‡•â‡§°">Cyber / Fraud</option>
      <option value="banking" data-en="Banking / Fintech" data-hi="‡§¨‡•à‡§Ç‡§ï‡§ø‡§Ç‡§ó / ‡§´‡§ø‡§®‡§ü‡•á‡§ï">Banking / Fintech</option>
      <option value="legal" data-en="Legal / Compliance" data-hi="‡§ï‡§æ‡§®‡•Ç‡§®‡•Ä / ‡§Ö‡§®‡•Å‡§™‡§æ‡§≤‡§®">Legal / Compliance</option>
      <option value="health" data-en="Healthcare" data-hi="‡§π‡•á‡§≤‡•ç‡§•‡§ï‡•á‡§Ø‡§∞">Healthcare</option>
      <option value="insurance" data-en="Insurance" data-hi="‡§¨‡•Ä‡§Æ‡§æ">Insurance</option>
      <option value="govt" data-en="Government / Public" data-hi="‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä / ‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï">Government / Public</option>
      <option value="ecom" data-en="E-commerce" data-hi="‡§à-‡§ï‡•â‡§Æ‡§∞‡•ç‡§∏">E-commerce</option>
      <option value="edu" data-en="Education / Research" data-hi="‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ / ‡§Ö‡§®‡•Å‡§∏‡§Ç‡§ß‡§æ‡§®">Education / Research</option>
      <option value="enterprise" data-en="Enterprise Security" data-hi="‡§è‡§Ç‡§ü‡§∞‡§™‡•ç‡§∞‡§æ‡§á‡§ú ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ">Enterprise Security</option>
    </select>

    <div class="field-label" id="lbl-input">MESSAGE / SMS / LINK</div>
    <textarea id="input-text" placeholder="Paste SMS, WhatsApp message, or link here..."></textarea>
    <div class="char-row">
      <button class="clear-btn" id="clear-btn">‚úï CLEAR</button>
      <span class="char-count"><span id="char-val">0</span> / 1000</span>
    </div>

    <button id="analyze-btn" onclick="doAnalyze()">
      <span id="btn-text">‚ö° ANALYZE RISK SIGNALS</span>
    </button>

    <div class="trust-row">
      <span class="trust-item" id="nd1">No Login</span>
      <span class="trust-item" id="nd2">No Storage</span>
      <span class="trust-item" id="nd3">Deterministic Rules</span>
    </div>
  </div>

  <div id="result-card"></div>

  <div class="examples-section">
    <div class="examples-title" id="ex-title">TRY AN EXAMPLE</div>
    <div class="example-btns">
      <button class="ex-btn" id="ex1" onclick="loadExample(0)">üö® Try scam example</button>
      <button class="ex-btn" id="ex2" onclick="loadExample(1)">üè¶ Try bank SMS example</button>
      <button class="ex-btn" id="ex3" onclick="loadExample(2)">üèõÔ∏è Try government advisory example</button>
    </div>
  </div>

  <div class="disclaimer-always">
    <strong id="disc-title">‚ö† DISCLAIMER</strong>
    <span id="disc-body">This is a risk-awareness tool, not a final verdict. False positives and false negatives are possible. Genuine messages can sometimes look risky. Fraudsters often copy official language.</span>
  </div>

  <div class="transparency">
    <div class="transparency-title" id="trans-title">HOW THIS WORKS</div>
    <div class="trans-list">
      <div class="trans-item" id="tr1">No login required</div>
      <div class="trans-item" id="tr2">No message content stored</div>
      <div class="trans-item" id="tr3">Deterministic rules ‚Äî not AI guessing</div>
      <div class="trans-item" id="tr4">Hash-sealed engine version</div>
    </div>
  </div>

  <footer>¬© <span>Veritas Engine</span> ‚Äî Open Risk Awareness Tool<br><span>ENGINE v1.1</span> ¬∑ RULES FROZEN</footer>
</div>

<!-- LIMIT MODAL -->
<div class="modal-overlay" id="limit-modal">
  <div class="modal-box">
    <div class="modal-icon">‚è≥</div>
    <div class="modal-title" id="modal-title">Daily Limit Reached</div>
    <div class="modal-text" id="modal-text">You have used all 10 analyses for today.<br>Please try again after 24 hours.</div>
    <button class="modal-close" onclick="document.getElementById('limit-modal').classList.remove('show')">OK</button>
  </div>
</div>

<!-- INFO POPUP -->
<div class="modal-overlay" id="info-popup">
  <div class="modal-box">
    <div class="modal-icon">üõ°Ô∏è</div>
    <div class="modal-title">About Veritas Guard</div>
    <div class="modal-text">This tool explains risk signals in messages.<br><br>It does NOT block, verify, report, or guarantee anything.<br><br>Engine: v1.1 ¬∑ Rules: FROZEN<br>Powered by deterministic pattern rules.</div>
    <button class="modal-close" onclick="document.getElementById('info-popup').classList.remove('show')">Close</button>
  </div>
</div>

<script>
const ENGINE_URL  = "https://api.veritasengine.in/decide";
const DAILY_LIMIT = 10;
const DEV_CODE    = "VERITAS-DEV-2026";

const EXAMPLES = [
  "Congratulations! You won Rs.5,00,000 lottery. Pay Rs.2,500 processing fee to claim your prize. Visit: bit.ly/claim-now",
  "Sent Rs.1,250 from HDFC Bank A/c XX1234 to Amazon Pay. UPI Ref 9837264512",
  "Important advisory from Ministry of Finance: Be aware of fake calls posing as income tax officials. Visit incometax.gov.in for official information."
];

const T = {
  en: {
    tagline:"EXPLAIN RISK ¬∑ DON'T DEMAND TRUST",
    lblUsecase:"USE CASE",lblInput:"MESSAGE / SMS / LINK",
    placeholder:"Paste SMS, WhatsApp message, or link here...",
    btnText:"‚ö° ANALYZE RISK SIGNALS",analyzing:"ANALYZING...",
    nd1:"No Login",nd2:"No Storage",nd3:"Deterministic Rules",
    lblTotal:"Total Scans",lblToday:"Today",
    rateText:"Remaining today:",
    discTitle:"‚ö† DISCLAIMER",
    discBody:"This is a risk-awareness tool, not a final verdict. False positives and false negatives are possible.",
    transTitle:"HOW THIS WORKS",
    tr1:"No login required",tr2:"No message content stored",
    tr3:"Deterministic rules ‚Äî not AI guessing",tr4:"Hash-sealed engine version",
    exTitle:"TRY AN EXAMPLE",
    ex1:"üö® Try scam example",ex2:"üè¶ Try bank SMS example",ex3:"üèõÔ∏è Try government advisory example",
    modalTitle:"Daily Limit Reached",
    modalText:"You have used all 10 analyses for today.<br>Please try again after 24 hours.",
    verdictLabel:["NORMAL","ATTENTION","SUSPICIOUS","FRAUD LIKELY"],
    verdictDesc:["No risk patterns detected","Minor signals ‚Äî stay alert","Multiple risk signals detected","High risk ‚Äî do not proceed"],
    verdictEmoji:["‚úì","!","‚ö†","‚úñ"],
    confLabel:"CONFIDENCE",confNote:"Confidence reflects rule strength, not certainty",
    rulesLabel:"TRIGGERED RULES",traceLabel:"TRACE (Advanced)",
    safeNotice:"Genuine messages can sometimes look risky. Fraudsters often copy official language.",
    fbLabel:"Was this helpful?",fbYes:"Helpful",fbNo:"Not Helpful",
    hashLabel:"ENGINE HASH",noRules:"No specific rules triggered",
    summaries:{
      0:"No risk patterns were detected in this message.",
      1:"Minor signals detected. Review carefully before proceeding.",
      2:"Multiple risk signals found. Treat with caution.",
      3:"High-risk patterns detected. Do not share details or make payments."
    }
  },
  hi: {
    tagline:"‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§∏‡§Æ‡§ù‡§æ‡§á‡§è ¬∑ ‡§≠‡§∞‡•ã‡§∏‡§æ ‡§Æ‡§§ ‡§Æ‡§æ‡§Ç‡§ó‡§ø‡§è",
    lblUsecase:"‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞",lblInput:"‡§∏‡§Ç‡§¶‡•á‡§∂ / SMS / ‡§≤‡§ø‡§Ç‡§ï",
    placeholder:"SMS, WhatsApp ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§Ø‡§æ ‡§≤‡§ø‡§Ç‡§ï ‡§Ø‡§π‡§æ‡§Å ‡§ö‡§ø‡§™‡§ï‡§æ‡§è‡§Å...",
    btnText:"‚ö° ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç",analyzing:"‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...",
    nd1:"‡§ï‡•ã‡§à ‡§≤‡•â‡§ó‡§ø‡§® ‡§®‡§π‡•Ä‡§Ç",nd2:"‡§ï‡•ã‡§à ‡§∏‡•ç‡§ü‡•ã‡§∞‡•á‡§ú ‡§®‡§π‡•Ä‡§Ç",nd3:"‡§®‡§ø‡§∞‡•ç‡§ß‡§æ‡§∞‡§ø‡§§ ‡§®‡§ø‡§Ø‡§Æ",
    lblTotal:"‡§ï‡•Å‡§≤ ‡§ú‡§æ‡§Å‡§ö‡•á‡§Ç",lblToday:"‡§Ü‡§ú",
    rateText:"‡§Ü‡§ú ‡§∂‡•á‡§∑:",
    discTitle:"‚ö† ‡§Ö‡§∏‡•ç‡§µ‡•Ä‡§ï‡§∞‡§£",
    discBody:"‡§Ø‡§π ‡§è‡§ï ‡§ú‡•ã‡§ñ‡§ø‡§Æ-‡§ú‡§æ‡§ó‡§∞‡•Ç‡§ï‡§§‡§æ ‡§ü‡•Ç‡§≤ ‡§π‡•à, ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø ‡§®‡§π‡•Ä‡§Ç‡•§ ‡§ó‡§≤‡§§ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§∏‡§Ç‡§≠‡§µ ‡§π‡•à‡§Ç‡•§",
    transTitle:"‡§Ø‡§π ‡§ï‡•à‡§∏‡•á ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à",
    tr1:"‡§ï‡•ã‡§à ‡§≤‡•â‡§ó‡§ø‡§® ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§®‡§π‡•Ä‡§Ç",tr2:"‡§ï‡•ã‡§à ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π‡•Ä‡§§ ‡§®‡§π‡•Ä‡§Ç",
    tr3:"‡§®‡§ø‡§∞‡•ç‡§ß‡§æ‡§∞‡§ø‡§§ ‡§®‡§ø‡§Ø‡§Æ ‚Äî AI ‡§Ö‡§®‡•Å‡§Æ‡§æ‡§® ‡§®‡§π‡•Ä‡§Ç",tr4:"‡§π‡•à‡§∂-‡§∏‡•Ä‡§≤‡•ç‡§° ‡§á‡§Ç‡§ú‡§® ‡§∏‡§Ç‡§∏‡•ç‡§ï‡§∞‡§£",
    exTitle:"‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§Ü‡§ú‡§º‡§Æ‡§æ‡§è‡§Ç",
    ex1:"üö® ‡§∏‡•ç‡§ï‡•à‡§Æ ‡§â‡§¶‡§æ‡§π‡§∞‡§£",ex2:"üè¶ ‡§¨‡•à‡§Ç‡§ï SMS ‡§â‡§¶‡§æ‡§π‡§∞‡§£",ex3:"üèõÔ∏è ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡§≤‡§æ‡§π ‡§â‡§¶‡§æ‡§π‡§∞‡§£",
    modalTitle:"‡§¶‡•à‡§®‡§ø‡§ï ‡§∏‡•Ä‡§Æ‡§æ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§",
    modalText:"‡§Ü‡§™‡§®‡•á ‡§Ü‡§ú ‡§ï‡•Ä 10 ‡§ú‡§æ‡§Å‡§ö ‡§™‡•Ç‡§∞‡•Ä ‡§ï‡§∞ ‡§≤‡•Ä ‡§π‡•à‡§Ç‡•§<br>24 ‡§ò‡§Ç‡§ü‡•á ‡§¨‡§æ‡§¶ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§",
    verdictLabel:["‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø","‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç","‡§∏‡§Ç‡§¶‡§ø‡§ó‡•ç‡§ß","‡§ß‡•ã‡§ñ‡§æ‡§ß‡§°‡§º‡•Ä ‡§∏‡§Ç‡§≠‡§µ"],
    verdictDesc:["‡§ï‡•ã‡§à ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§™‡•à‡§ü‡§∞‡•ç‡§® ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ","‡§õ‡•ã‡§ü‡•á ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§Æ‡§ø‡§≤‡•á ‚Äî ‡§∏‡§§‡§∞‡•ç‡§ï ‡§∞‡§π‡•á‡§Ç","‡§ï‡§à ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§Æ‡§ø‡§≤‡•á","‡§â‡§ö‡•ç‡§ö ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‚Äî ‡§Ü‡§ó‡•á ‡§® ‡§¨‡§¢‡§º‡•á‡§Ç"],
    verdictEmoji:["‚úì","!","‚ö†","‚úñ"],
    confLabel:"‡§Ü‡§§‡•ç‡§Æ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§∏‡•ç‡§ï‡•ã‡§∞",confNote:"‡§Ø‡§π ‡§∏‡•ç‡§ï‡•ã‡§∞ ‡§®‡§ø‡§Ø‡§Æ ‡§ï‡•Ä ‡§§‡§æ‡§ï‡§§ ‡§¶‡§∞‡•ç‡§∂‡§æ‡§§‡§æ ‡§π‡•à, ‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§‡§§‡§æ ‡§®‡§π‡•Ä‡§Ç",
    rulesLabel:"‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§®‡§ø‡§Ø‡§Æ",traceLabel:"‡§ü‡•ç‡§∞‡•á‡§∏ (‡§â‡§®‡•ç‡§®‡§§)",
    safeNotice:"‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§≠‡•Ä ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§≠‡§∞‡•á ‡§≤‡§ó ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§†‡§ó ‡§Ö‡§ï‡•ç‡§∏‡§∞ ‡§Ü‡§ß‡§ø‡§ï‡§æ‡§∞‡§ø‡§ï ‡§≠‡§æ‡§∑‡§æ ‡§ï‡•Ä ‡§®‡§ï‡§≤ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§",
    fbLabel:"‡§ï‡•ç‡§Ø‡§æ ‡§Ø‡§π ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§•‡§æ?",fbYes:"‡§∏‡§π‡§æ‡§Ø‡§ï",fbNo:"‡§∏‡§π‡§æ‡§Ø‡§ï ‡§®‡§π‡•Ä‡§Ç",
    hashLabel:"‡§á‡§Ç‡§ú‡§® ‡§π‡•à‡§∂",noRules:"‡§ï‡•ã‡§à ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§®‡§ø‡§Ø‡§Æ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ",
    summaries:{
      0:"‡§á‡§∏ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§™‡•à‡§ü‡§∞‡•ç‡§® ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§",
      1:"‡§õ‡•ã‡§ü‡•á ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§Æ‡§ø‡§≤‡•á‡•§ ‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§∏‡•á ‡§ú‡§æ‡§Å‡§ö‡•á‡§Ç‡•§",
      2:"‡§ï‡§à ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§Æ‡§ø‡§≤‡•á‡•§ ‡§∏‡§§‡§∞‡•ç‡§ï ‡§∞‡§π‡•á‡§Ç‡•§",
      3:"‡§â‡§ö‡•ç‡§ö-‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§™‡•à‡§ü‡§∞‡•ç‡§® ‡§Æ‡§ø‡§≤‡•á‡•§ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§∏‡§æ‡§ù‡§æ ‡§® ‡§ï‡§∞‡•á‡§Ç‡•§"
    }
  }
};

let lang = localStorage.getItem('vg_lang') || 'en';

/* RATE LIMIT */
function getRateData() {
  const today = new Date().toDateString();
  try {
    const d = JSON.parse(localStorage.getItem('vg_rate') || '{}');
    if (d.date !== today) return { date: today, used: 0 };
    return d;
  } catch(e) { return { date: today, used: 0 }; }
}
function saveRateData(d) { localStorage.setItem('vg_rate', JSON.stringify(d)); }
function getRem() { return Math.max(0, DAILY_LIMIT - getRateData().used); }
function incUse() { const d = getRateData(); d.used++; saveRateData(d); }
function renderRateBar() {
  const rem = getRem();
  const t = T[lang];
  document.getElementById('rate-text').innerHTML = t.rateText + ' <span id="rate-num">' + rem + '</span>/' + DAILY_LIMIT;
  const el = document.getElementById('rate-dots');
  el.innerHTML = '';
  for (let i = 0; i < DAILY_LIMIT; i++) {
    const d = document.createElement('div');
    d.className = 'rate-dot' + (i >= rem ? ' used' : '');
    el.appendChild(d);
  }
}

/* STATS */
async function loadStats() {
  try {
    const res = await fetch('https://api.veritasengine.in/stats');
    if (!res.ok) return;
    const d = await res.json();
    if (d.total !== undefined) document.getElementById('stat-total').textContent = d.total;
    if (d.today !== undefined) document.getElementById('stat-today').textContent = d.today;
    if (d.flagged_pct !== undefined) document.getElementById('stat-pct').textContent = d.flagged_pct + '%';
  } catch(e) {}
}

/* ENGINE */
async function callEngine(text) {
  try {
    const res = await fetch(ENGINE_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ input: text })
    });
    if (!res.ok) throw new Error('engine error');
    const data = await res.json();
    return {
      verdict:     data.decision,
      confidence:  data.confidence  || 0,
      fired_rules: data.fired_rules || [],
      trace:       data.trace       || [],
      intent:      data.intent      || '',
      hash:        data.hash        || 'pending'
    };
  } catch(e) { return null; }
}

/* ANALYZE */
async function doAnalyze() {
  const text = document.getElementById('input-text').value.trim();
  if (!text) {
    document.getElementById('input-text').style.borderColor = '#ef4444';
    setTimeout(() => document.getElementById('input-text').style.borderColor = '', 1000);
    return;
  }
  if (getRem() <= 0) {
    const t = T[lang];
    document.getElementById('modal-title').textContent = t.modalTitle;
    document.getElementById('modal-text').innerHTML = t.modalText;
    document.getElementById('limit-modal').classList.add('show');
    return;
  }
  const t = T[lang];
  const btn = document.getElementById('analyze-btn');
  btn.disabled = true;
  btn.classList.add('loading');
  document.getElementById('btn-text').textContent = t.analyzing;

  const r = await callEngine(text);

  btn.disabled = false;
  btn.classList.remove('loading');
  document.getElementById('btn-text').textContent = t.btnText;

  if (!r || r.verdict === undefined) {
    alert('‚ùå Engine not reachable ‚Äî check server');
    return;
  }

  incUse();
  renderRateBar();
  loadStats();
  showResult(r, t);
}

/* SHOW RESULT */
function showResult(r, t) {
  const v = r.verdict;
  const rulesHTML = r.fired_rules && r.fired_rules.length > 0
    ? r.fired_rules.map(rule => '<span class="rule-tag rt' + v + '">' + rule + '</span>').join('')
    : '<span class="rule-tag" style="color:var(--muted);border-color:var(--border)">' + t.noRules + '</span>';

  const traceHTML = (r.trace || []).map(step =>
    '<div class="trace-row"><span>' + (step.step || '‚Äî') + '</span><span>' + (step.score !== undefined ? step.score : '‚Äî') + '</span></div>'
  ).join('') || '<div class="trace-row"><span>‚Äî</span><span>‚Äî</span></div>';

  const el = document.getElementById('result-card');
  el.innerHTML =
    '<div class="result-header bg' + v + '">' +
      '<div class="verdict-icon bg' + v + ' v' + v + '">' + t.verdictEmoji[v] + '</div>' +
      '<div><div class="verdict-label v' + v + '">' + t.verdictLabel[v] + '</div>' +
      '<div class="verdict-desc">' + t.verdictDesc[v] + '</div></div>' +
    '</div>' +
    '<div class="summary-line">' + t.summaries[v] + '</div>' +
    '<div class="conf-wrap">' +
      '<div class="conf-top"><span>' + t.confLabel + '</span><span class="v' + v + '">' + (r.confidence||0) + '%</span></div>' +
      '<div class="conf-bar"><div class="conf-fill fill' + v + '" id="conf-fill"></div></div>' +
      '<div class="conf-note">' + t.confNote + '</div>' +
    '</div>' +
    '<div class="rules-wrap">' +
      '<button class="collapsible-btn" id="rules-btn" onclick="toggle(\'rules-btn\',\'rules-body\')">' + t.rulesLabel + '</button>' +
      '<div class="collapsible-body" id="rules-body">' + rulesHTML + '</div>' +
    '</div>' +
    '<div class="trace-wrap">' +
      '<button class="collapsible-btn" id="trace-btn" onclick="toggle(\'trace-btn\',\'trace-inner\')">' + t.traceLabel + '</button>' +
      '<div class="trace-body-inner" id="trace-inner">' + traceHTML + '</div>' +
    '</div>' +
    '<div class="hash-wrap"><span class="hash-key">' + t.hashLabel + '</span><span class="hash-val">' + (r.hash||'pending') + '</span></div>' +
    '<div class="safe-notice">' + t.safeNotice + '</div>' +
    '<div class="feedback-wrap">' +
      '<span class="feedback-lbl">' + t.fbLabel + '</span>' +
      '<button class="fb-btn" id="fb-yes" onclick="giveFb(\'yes\')">' + t.fbYes + '</button>' +
      '<button class="fb-btn" id="fb-no" onclick="giveFb(\'no\')">' + t.fbNo + '</button>' +
    '</div>';

  el.style.display = 'block';
  setTimeout(() => { const f = document.getElementById('conf-fill'); if(f) f.style.width = (r.confidence||0) + '%'; }, 100);
  el.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

function toggle(btnId, bodyId) {
  document.getElementById(btnId).classList.toggle('open');
  document.getElementById(bodyId).classList.toggle('open');
}

function giveFb(type) {
  const yes = document.getElementById('fb-yes');
  const no  = document.getElementById('fb-no');
  if (yes) yes.classList.toggle('selected', type === 'yes');
  if (no)  no.classList.toggle('selected', type === 'no');
}

function loadExample(i) {
  document.getElementById('input-text').value = EXAMPLES[i];
  document.getElementById('char-val').textContent = EXAMPLES[i].length;
}

/* LANG */
function setLang(l) {
  lang = l;
  localStorage.setItem('vg_lang', l);
  applyLang();
}
function applyLang() {
  const t = T[lang];
  const ids = {
    'tagline-text':t.tagline,'lbl-usecase':t.lblUsecase,'lbl-input':t.lblInput,
    'btn-text':t.btnText,'nd1':t.nd1,'nd2':t.nd2,'nd3':t.nd3,
    'lbl-total':t.lblTotal,'lbl-today':t.lblToday,
    'disc-title':t.discTitle,'disc-body':t.discBody,
    'trans-title':t.transTitle,'tr1':t.tr1,'tr2':t.tr2,'tr3':t.tr3,'tr4':t.tr4,
    'ex-title':t.exTitle,'ex1':t.ex1,'ex2':t.ex2,'ex3':t.ex3
  };
  for (const [id, val] of Object.entries(ids)) {
    const el = document.getElementById(id);
    if (el) el.textContent = val;
  }
  document.getElementById('input-text').placeholder = t.placeholder;
  document.querySelectorAll('#usecase option').forEach(o => {
    o.textContent = lang === 'hi' ? o.dataset.hi : o.dataset.en;
  });
  document.getElementById('btn-en').classList.toggle('active', lang === 'en');
  document.getElementById('btn-hi').classList.toggle('active', lang === 'hi');
  renderRateBar();
}

/* DEV BYPASS ‚Äî type code in textarea */
document.addEventListener('input', function(e) {
  if (e.target.id === 'input-text' && e.target.value.trim() === DEV_CODE) {
    const d = getRateData(); d.used = 0; saveRateData(d);
    e.target.value = '';
    document.getElementById('char-val').textContent = '0';
    renderRateBar();
    alert('‚úÖ Dev: Daily limit reset!');
  }
});

document.addEventListener('DOMContentLoaded', () => {
  document.getElementById('input-text').addEventListener('input', function() {
    document.getElementById('char-val').textContent = this.value.length;
  });
  document.getElementById('clear-btn').addEventListener('click', () => {
    document.getElementById('input-text').value = '';
    document.getElementById('char-val').textContent = '0';
    document.getElementById('result-card').style.display = 'none';
  });
  applyLang();
  loadStats();
});
</script>
</body>
</html>
