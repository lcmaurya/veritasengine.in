<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Veritas Guard</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;600;800&display=swap');
:root{
--bg:#060910;--surface:#0d1117;--border:#1e2d3d;
--accent:#00d4ff;--accent2:#ff4d6d;--accent3:#00ff9d;
--text:#c9d1d9;--muted:#586069;
--v0:#00ff9d;--v1:#ffaa00;--v2:#ff7043;--v3:#ff4d6d
}
*{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:var(--text);font-family:'Syne',sans-serif;min-height:100vh}
#app{max-width:480px;margin:auto;padding:80px 16px}
.header{text-align:center;margin-bottom:20px}
.logo{display:flex;justify-content:center;gap:10px}
.logo-icon{width:42px;height:42px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#0051ff);display:flex;align-items:center;justify-content:center}
.logo-text{font-size:26px;font-weight:800;background:linear-gradient(90deg,var(--accent),#fff);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.tagline{font-family:'Space Mono',monospace;font-size:11px;color:var(--muted);letter-spacing:2px}
.stats-bar{display:flex;gap:20px;justify-content:center;background:var(--surface);padding:12px;border-radius:10px;margin-bottom:14px}
.stat{text-align:center}
.stat-val{font-family:'Space Mono',monospace;font-size:15px;color:var(--accent)}
.stat-label{font-size:10px;color:var(--muted)}
.card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:20px}
.lang-toggle{display:flex;gap:6px;margin-bottom:12px}
.lang-btn{flex:1;padding:8px;border:1px solid var(--border);background:transparent;color:var(--muted);cursor:pointer}
.lang-btn.active{border-color:var(--accent);color:var(--accent)}
.field-label{font-size:11px;font-family:'Space Mono',monospace;color:var(--muted);margin-bottom:6px}
textarea{width:100%;height:100px;background:var(--bg);border:1px solid var(--border);border-radius:8px;color:var(--text);padding:10px;font-family:'Space Mono',monospace}
.char-row{display:flex;justify-content:space-between;margin:6px 0}
#analyze-btn{width:100%;padding:14px;border:none;border-radius:8px;background:linear-gradient(135deg,var(--accent),#0051ff);font-weight:800;cursor:pointer}
#analyze-btn.loading{opacity:.6;pointer-events:none}
#result-card{display:none;margin-top:14px;background:var(--surface);border-radius:12px;overflow:hidden}
.result-header{display:flex;gap:12px;padding:16px}
.verdict-icon{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center}
.conf-section{padding:0 16px 12px}
.conf-bar{height:6px;background:var(--border);border-radius:3px}
.conf-fill{height:100%;width:0}
.reason-tag{display:inline-block;margin:3px;padding:4px 10px;border-radius:20px;font-size:10px;border:1px solid}
.c0{color:var(--v0)} .c1{color:var(--v1)} .c2{color:var(--v2)} .c3{color:var(--v3)}
.bg0{background:rgba(0,255,157,.12)} .bg1{background:rgba(255,170,0,.12)}
.bg2{background:rgba(255,112,67,.12)} .bg3{background:rgba(255,77,109,.12)}
.fill0{background:var(--v0)} .fill1{background:var(--v1)} .fill2{background:var(--v2)} .fill3{background:var(--v3)}
footer{text-align:center;margin-top:16px;font-size:10px;color:var(--muted)}
</style>
</head>

<body>
<div id="app">

<div class="header">
  <div class="logo">
    <div class="logo-icon">üõ°Ô∏è</div>
    <div class="logo-text">Veritas Guard</div>
  </div>
  <div class="tagline" id="tagline-text">EXPLAIN RISK ¬∑ DON'T DEMAND TRUST</div>
</div>

<div class="stats-bar">
  <div class="stat"><div class="stat-val" id="stat-scanned">0</div><div class="stat-label">Scanned</div></div>
  <div class="stat"><div class="stat-val" id="stat-flagged">0</div><div class="stat-label">Flagged</div></div>
  <div class="stat"><div class="stat-val">v1.0</div><div class="stat-label">Engine</div></div>
</div>

<div class="card">
  <div class="lang-toggle">
    <button class="lang-btn active" id="btn-en">EN</button>
    <button class="lang-btn" id="btn-hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</button>
  </div>

  <div class="field-label" id="lbl-input">MESSAGE / SMS / LINK</div>
  <textarea id="input-text" placeholder="Paste message here..."></textarea>

  <div class="char-row">
    <button id="clear-btn">‚úï CLEAR</button>
    <span><span id="char-val">0</span>/1000</span>
  </div>

  <button id="analyze-btn"><span id="btn-text">‚ö° ANALYZE</span></button>
</div>

<div id="result-card"></div>

<footer>¬© <span>Veritas Engine</span> ‚Äî Open Risk Awareness Tool</footer>
</div>

<script>
/* ================= ENGINE ================= */
const ENGINE_URL = "https://api.veritasengine.in/decide";

async function callEngine(inputText){
  try{
    const r = await fetch(ENGINE_URL,{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({input:inputText})
    });
    if(!r.ok) throw new Error("engine down");
    const d = await r.json();
    return {
      decision:d.decision,
      confidence:d.confidence||0,
      fired_rules:d.fired_rules||[],
      hash:d.hash||"ok"
    };
  }catch(e){ return null; }
}

/* ================= STATE ================= */
let scan=0, flag=0;

/* ================= ANALYZE ================= */
document.addEventListener("DOMContentLoaded",()=>{
  const $ = id=>document.getElementById(id);

  $("input-text").oninput=()=>$("char-val").textContent=$("input-text").value.length;

  $("clear-btn").onclick=()=>{
    $("input-text").value="";
    $("char-val").textContent="0";
    $("result-card").style.display="none";
  };

  $("analyze-btn").onclick=async()=>{
    const text=$("input-text").value.trim();
    if(!text) return;
    $("analyze-btn").classList.add("loading");
    const r=await callEngine(text);
    $("analyze-btn").classList.remove("loading");
    if(!r){ alert("‚ùå Engine not reachable"); return; }

    scan++; if(r.decision>=2) flag++;
    $("stat-scanned").textContent=scan;
    $("stat-flagged").textContent=flag;

    showResult(r);
  };
});

/* ================= RESULT ================= */
function showResult(r){
  const v=r.decision;
  const rc=document.getElementById("result-card");
  rc.innerHTML=`
  <div class="result-header bg${v}">
    <div class="verdict-icon bg${v}">${["‚úÖ","‚ö†Ô∏è","üî∂","üö®"][v]}</div>
    <div><h3 class="c${v}">${["GENUINE","ATTENTION","SUSPICIOUS","FRAUD"][v]}</h3></div>
  </div>
  <div class="conf-section">
    <div>${r.confidence}%</div>
    <div class="conf-bar"><div class="conf-fill fill${v}" style="width:${r.confidence}%"></div></div>
  </div>`;
  rc.style.display="block";
}
</script>
</body>
</html>