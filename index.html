<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<meta http-equiv="Cache-Control" content="no-store">
<title>Veritas Guard</title>

<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ›¡ï¸</text></svg>">

<style>
body{margin:0;font-family:system-ui;background:#0b1220;color:#e5e7eb}
#app{max-width:520px;margin:40px auto;background:#0f172a;border-radius:14px;padding:22px;box-shadow:0 0 40px rgba(0,0,0,.6)}
h1{text-align:center;margin:0}
.tagline{text-align:center;color:#94a3b8;font-size:13px;margin-bottom:14px}
select,textarea,button{width:100%;border-radius:8px;border:1px solid #334155;background:#020617;color:#e5e7eb;padding:12px;font-size:15px}
select{margin-bottom:10px}
textarea{height:110px;resize:none}
textarea:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 12px rgba(59,130,246,.4)}
button{margin-top:12px;background:#2563eb;font-weight:700;cursor:pointer}
button:hover{background:#1d4ed8}

#result{display:none;margin-top:20px;background:#020617;border-radius:10px;padding:14px;border:1px solid #334155}
.badge{display:inline-block;padding:6px 12px;border-radius:6px;font-weight:700;margin-bottom:10px}
ul{padding-left:18px;color:#9ca3af;font-size:13px}
.hash{font-family:monospace;font-size:11px;color:#64748b;background:#020617;border:1px dashed #334155;padding:8px;border-radius:6px;margin-top:10px;word-break:break-all}
.actions{display:flex;gap:8px;margin-top:14px}
.actions button{flex:1;font-size:13px}
footer{text-align:center;font-size:12px;color:#6b7280;margin-top:18px}
</style>
</head>

<body>

<div id="app">
<h1>ğŸ›¡ï¸ Veritas Guard</h1>
<div class="tagline">Explain risk. Donâ€™t demand trust.</div>

<!-- USE CASE SELECTOR -->
<select id="usecase">
<option value="cyber">Cyber / Fraud</option>
<option value="banking">Banking / Fintech</option>
<option value="legal">Legal / Compliance</option>
<option value="health">Healthcare (non-diagnostic)</option>
<option value="insurance">Insurance</option>
<option value="gov">Government / Public</option>
<option value="ecom">E-commerce</option>
<option value="edu">Education / Research</option>
<option value="enterprise">Enterprise Security</option>
</select>

<textarea id="input" placeholder="Paste message, SMS, link or textâ€¦"></textarea>
<button onclick="scan()">SCAN & GENERATE PROOF</button>

<div id="result">
<div id="risk" class="badge"></div>
<div id="explain"></div>
<ul id="rules"></ul>
<div id="hash" class="hash"></div>

<div class="actions">
<button onclick="speak()">ğŸ”Š Voice</button>
<button onclick="share()">ğŸ“¤ Share</button>
<button onclick="location.reload()">ğŸ—‘ï¸ Clear</button>
</div>
</div>

<footer>
No login Â· No storage Â· Deterministic proof only
</footer>
</div>

<script>
const API="http://127.0.0.1:3000/api/scan";
let lastData=null;

function scan(){
const txt=document.getElementById("input").value.trim();
if(!txt)return;

fetch(API,{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({text:txt,usecase:document.getElementById("usecase").value})
})
.then(r=>r.json())
.then(d=>{
lastData=d;
const labels=["SAFE","ATTENTION","RISK","HIGH RISK"];
const colors=["#10b981","#eab308","#f97316","#ef4444"];

const badge=document.getElementById("risk");
badge.innerText=labels[d.verdict];
badge.style.color=colors[d.verdict];
badge.style.border=`1px solid ${colors[d.verdict]}`;

document.getElementById("explain").innerText=d.explain_text||"";
document.getElementById("rules").innerHTML=(d.fired_rules||[]).map(r=>`<li>${r}</li>`).join("");
document.getElementById("hash").innerText="AUDIT HASH: "+d.audit_hash;

document.getElementById("result").style.display="block";
});
}

function speak(){
if(!lastData)return;
const msg=new SpeechSynthesisUtterance(
lastData.verdict>=2?
"Warning. High risk detected.":
"No major risk detected."
);
speechSynthesis.speak(msg);
}

function share(){
if(!lastData)return;
const t=`Veritas Proof\nRisk:${lastData.verdict}\nHash:${lastData.audit_hash}`;
navigator.share?navigator.share({text:t}):alert(t);
}
</script>

</body>
</html>